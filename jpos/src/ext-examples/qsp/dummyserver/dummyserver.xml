<?xml version="1.0" ?>
<!--

    $Id: dummyserver.xml,v 1.9 2003/09/03 00:21:19 apr Exp $

   This sample configuration file will setup a

   - A logger with a simple log listener

   - An ISOServer that will listen for incoming connections on port 8000
     with an associated Connector that will forward all received messages
     to ISOMUX

   - An ISOMUX connected to a LoopbackChannel that will 'bounce' 
     all incoming messages

              ________                 ________ 
   __________|        |               |        |    _________________ 
   port _____|  ISO   |               | ISOMUX |___| LoopbackChannel |
   8000 _____| Server |   _________   |        |   |_________________|
   __________|        |__|Connector|__|        |       |
             |________|  |_________|  |________|       \ XSLT outgoing
	                                                 filter
-->

<!DOCTYPE qsp-config SYSTEM "../../../config/qsp/qsp-config.dtd"> 
<qsp-config>
 <logger name="qsp">
    <log-listener class="org.jpos.util.SimpleLogListener"/>
    <!-- log-listener class="org.jpos.util.OperatorLogListener">
     <property name="jpos.operator.from" value="jpos-logger@cs.com.uy"      />
     <property name="jpos.operator.to"             value="apr@cs.com.uy"    />
     <property name="jpos.operator.subject.prefix" value="[jPOS] "          />
     <property name="jpos.operator.tags"           value="SystemMonitor"    />
     <property name="jpos.operator.delay"          value="10000"            />
     <property name="jpos.mail.smtp.host"          value="cs.cs.com.uy"     />
    </log-listener -->
 </logger>

 <control-panel rows="1" cols="1">
  <panel name="loopback.channel" />
 </control-panel>

 <server name="server" logger="qsp" realm="server" port="8000" >
  <channel name="client-side-channel" 
          class="org.jpos.iso.channel.ASCIIChannel" 
          packager="org.jpos.iso.packager.ISO87APackager"
          type="server" logger="qsp" realm="client-side-channel">
   <filter class="org.jpos.iso.filter.MD5Filter" direction="both">
    <property name="key" value="AnyKey" />
    <property name="fields" value="0 7 11 37 41" />
   </filter>

  </channel>
  <request-listener class="org.jpos.apps.qsp.Connector"
    logger="qsp" realm="connector">
    <property name="destination-mux" value="mux" />
    <property name="timeout" value="15000" />
  </request-listener>
 </server>

 <mux name="mux" logger="qsp" realm="mux">
  <channel name="server-side-channel" 
          class="org.jpos.iso.channel.LoopbackChannel" 
          logger="qsp" realm="acme" panel="loopback.channel" >
   <filter class="org.jpos.iso.filter.XSLTFilter" direction="incoming">
    <property name="xsltfile" 
              value="src/ext-examples/qsp/dummyserver/dummy-incoming.xsl" />
    <property name="reread" value="yes" />
   </filter>
  </channel>
 </mux>
</qsp-config>
